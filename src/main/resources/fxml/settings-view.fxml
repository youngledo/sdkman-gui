<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="io.sdkman.controller.SettingsController"
      styleClass="page-content"
      spacing="20">

    <padding>
        <Insets top="40" right="40" bottom="40" left="40"/>
    </padding>

  
    <!-- 页面头部 -->
    <VBox spacing="8">
        <Label fx:id="titleLabel" styleClass="page-title"/>
        <Label fx:id="subtitleLabel" styleClass="page-subtitle"/>
    </VBox>

    <!-- 设置内容 - ScrollPane -->
    <ScrollPane VBox.vgrow="ALWAYS" fitToWidth="true" styleClass="settings-scroll">
        <VBox spacing="10">

            <!-- 主题设置 -->
            <VBox spacing="12" styleClass="settings-section">
                <Label fx:id="themeLabel" styleClass="settings-section-title"/>
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <RadioButton fx:id="themeLightRadio"/>
                    <RadioButton fx:id="themeDarkRadio"/>
                    <RadioButton fx:id="themeAutoRadio"/>
                </HBox>
            </VBox>

            <!-- 语言设置 -->
            <VBox spacing="12" styleClass="settings-section">
                <Label fx:id="languageLabel" styleClass="settings-section-title"/>
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <RadioButton fx:id="languageZhRadio"/>
                    <RadioButton fx:id="languageEnRadio"/>
                </HBox>
            </VBox>

            <!-- 代理设置 -->
            <VBox spacing="12" styleClass="settings-section">
                <Label fx:id="proxyLabel" styleClass="settings-section-title"/>

                <!-- 代理类型选择 -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <RadioButton fx:id="proxyNoneRadio"/>
                    <RadioButton fx:id="proxyAutoRadio"/>
                    <RadioButton fx:id="proxyManualRadio"/>
                </HBox>

                <!-- 手动配置区域 -->
                <VBox fx:id="proxyManualBox" spacing="10" managed="false" visible="false">
                    <padding>
                        <Insets top="10" left="20"/>
                    </padding>

                    <!-- 代理主机 -->
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label fx:id="proxyHostLabel" minWidth="100"/>
                        <TextField fx:id="proxyHostField" prefWidth="300"/>
                    </HBox>

                    <!-- 代理端口 -->
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label fx:id="proxyPortLabel" minWidth="100"/>
                        <TextField fx:id="proxyPortField" prefWidth="300"/>
                    </HBox>
                </VBox>
            </VBox>

            <!-- SDKMAN 路径设置 -->
            <VBox spacing="12" styleClass="settings-section">
                <Label fx:id="sdkmanPathLabel" styleClass="settings-section-title"/>
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <TextField fx:id="sdkmanPathField" prefWidth="400" HBox.hgrow="ALWAYS"/>
                    <Button fx:id="browseButton" onAction="#onBrowseClicked"/>
                </HBox>
            </VBox>

            <!-- 应用版本更新 -->
            <VBox spacing="12" styleClass="settings-section">
                <Label fx:id="appVersionLabel" styleClass="settings-section-title"/>

                <!-- 当前版本信息 -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label fx:id="currentVersionLabel"/>
                    <Label fx:id="currentVersionValue" styleClass="text-bold"/>
                </HBox>

                <!-- 检查更新按钮和状态 -->
                <HBox spacing="15" alignment="CENTER_LEFT">
                    <Button fx:id="checkUpdateButton" onAction="#onCheckUpdateClicked"/>
                    <Label fx:id="updateStatusLabel" styleClass="text-muted"/>
                </HBox>

                <!-- 更新提示（有新版本时显示） -->
                <VBox fx:id="updateAvailableBox" spacing="15" managed="false" visible="false"
                      style="-fx-background-color: -color-success-bg; -fx-background-radius: 8; -fx-border-color: -color-success-emphasis; -fx-border-width: 1; -fx-border-radius: 8;">
                    <padding>
                        <Insets top="15" right="15" bottom="15" left="15"/>
                    </padding>

                    <!-- 新版本信息头部 -->
                    <VBox spacing="8">
                        <Label fx:id="newVersionLabel" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label fx:id="latestVersionLabel"/>
                            <Label fx:id="latestVersionValue" styleClass="text-bold"
                                   style="-fx-text-fill: -color-success-emphasis; -fx-font-size: 16px;"/>
                            <Hyperlink fx:id="downloadManualLink" styleClass="hyperlink"/>
                        </HBox>
                    </VBox>

                    <!-- 操作区域 -->
                    <VBox spacing="12">
                        <!-- 下载区域 -->
                        <VBox spacing="8">
                            <HBox spacing="12" alignment="CENTER_LEFT">
                                <Button fx:id="downloadButton" onAction="#onDownloadClicked"
                                        style="-fx-min-width: 120px;"/>
                                <Label fx:id="downloadStatusLabel" styleClass="text-muted"/>
                            </HBox>

                            <!-- 下载进度条（下载时显示） -->
                            <VBox fx:id="downloadProgressBox" spacing="5" managed="false" visible="false">
                                <ProgressBar fx:id="downloadProgressBar" prefWidth="400" maxWidth="Infinity"/>
                                <Label fx:id="downloadProgressLabel" styleClass="text-muted"
                                       style="-fx-font-size: 11px;"/>
                            </VBox>
                        </VBox>

                        <!-- 安装区域（下载完成后显示） -->
                        <HBox fx:id="installBox" spacing="12" alignment="CENTER_LEFT"
                              managed="false" visible="false">
                            <Button fx:id="installButton" onAction="#onInstallClicked"
                                    styleClass="accent" style="-fx-min-width: 120px;"/>
                            <Label fx:id="installStatusLabel" styleClass="text-muted"/>
                        </HBox>
                    </VBox>
                </VBox>
            </VBox>
        </VBox>
    </ScrollPane>

</VBox>
